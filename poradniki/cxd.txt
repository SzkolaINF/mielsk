#Bierzemy "Image" obraz Alpine 3.5
docker pull alpine:3.5
#uruchamiamy docker oraz tworzymy go aby działał w tle, nadajemy mu nazwę ctn-1(ContainerID or name), podajemy miejsce obrazu i czas przez który ten docker ma być aktywny(3600dni)
docker run -d --name ctn-1 library/alpine:3.5 sleep 3600d
#Tworzymy sieć net1/2 z podsieciami
docker network create net1 --subnet=172.19.0.0/16
docker network create net2 --subnet=172.20.0.0/16
# tworzymy alpine-net1/2/router w trybie uprzywilejowanym i nadajemy i łączymy je z sieciami oraz routerem
-docker run -d --name alpine-net1 --privileged --net="net1" alpine
-docker run -d --name alpine-net2 --privileged --net="net2" alpine
-docker run -d --name alpine-router --privileged --net="net1" alpine
-docker network connect net2 alpine-router
#Dodajemy ścieżkę komunikacji pomiędzy net1 oraz net2
-route add -net 172.20.0.0 netmask 255.255.0.0 gw 172.19.0.3 eth0
-route add -net 172.19.0.0 netmask 255.255.0.0 gw 172.20.0.3 eth0
####Tworzenie zewnętrznego bridga i ns1
ip netns add ns1
ip link add br0 type bridge
#Podnosimy bridga
ip link set br0 up
ip link add veth1 type veth peer name vpeer1
ip link add veth2 type veth peer name vpeer2
ip link set veth1 up
ip link set veth2 up
ip link set vpeer1 netns ns1
ip link set vpeer2 netns docker0

